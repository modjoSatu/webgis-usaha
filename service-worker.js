const CACHE_NAME='webgis-v8-shell-v1';const ASSETS=['./','./index.html','./manifest.json'];self.addEventListener('install',e=>{console.log('[PWA] installing');e.waitUntil(caches.open(CACHE_NAME).then(c=>c.addAll(ASSETS)).catch(err=>console.warn('[PWA] cache addAll failed',err)));self.skipWaiting();});self.addEventListener('activate',e=>{console.log('[PWA] activated');self.clients.claim();});self.addEventListener('fetch',e=>{e.respondWith((async ()=>{try{return await fetch(e.request);}catch(err){const cached=await caches.match(e.request);return cached||Response.error();}})());});